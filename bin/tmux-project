#!/bin/bash

if [ $# -eq 0 ]; then
    SESSION=$(basename $PWD)
else
    SESSION=$1
fi

export SESSION=${SESSION//./}

# set window title
echo -ne "\033]0;${SESSION}\007"

if [ -d ".virtualenv" ]; then
  export VIRTUAL_ENV="$(readlink -f .)/.virtualenv"
  # tmux set-environment -t $SESSION VIRTUAL_ENV $VIRTUAL_ENV
fi

# tmux set-option -t $SESSION -a update-environment ' VIRTUAL_ENV PATH'
# tmux set-environment -t $SESSION PATH $PATH
# tmux set-environment -t $SESSION PATH "$VIRTUAL_ENV/.bin:$PATH"
# export VIRTUAL_ENV PATH

tmux new-session -s $SESSION -d
tmux attach-session -t $SESSION \; source-file ~/.common-public/sh/.tmux-project.tmux

# \; \
#   setenv VIRTUAL_ENV $VIRTUAL_ENV \; \
#   setenv PATH "$VIRTUAL_ENV/bin:$PATH" \; \
#   source-file 
